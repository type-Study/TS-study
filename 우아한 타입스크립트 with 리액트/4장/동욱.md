# íƒ€ì… í™•ì¥í•˜ê¸°

## íƒ€ì… í™•ì¥í•˜ê¸°

### ìœ ë‹ˆì˜¨ íƒ€ì…, êµì°¨ íƒ€ì…, í™•ì¥

ìœ ë‹ˆì˜¨ íƒ€ì…ìœ¼ë¡œ ì„ ì–¸ ëœ ê°’ì€ ìœ ë‹ˆì˜¨ íƒ€ì…ì— í¬í•¨ëœ ëª¨ë“  íƒ€ì…ì´ ê³µí†µìœ¼ë¡œ ê°–ê³  ìˆëŠ” ì†ì„±ì— ê´€í•´ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë‹¤.

```ts
interface CookingStep {
  orderId: string;
  price: number;
}

interface DeliverStep {
  orderId: string;
  time: number;
  distance: string;
}

function getDeliveryDistance(step: CookingStep | DeliveryType) {
  return step.distance;
  // ğŸš¨ Property `distance` does not exist on type 'CookingStep | DeliveryStep'
}
```

êµì°¨ íƒ€ì…ì„ ì‚¬ìš©í•  ë•Œ í˜¸í™˜ë˜ì§€ ì•ŠëŠ” ê²½ìš°ë„ ìˆë‹¤. ì•„ë˜ì˜ Universal íƒ€ì…ì€ numberì´ë‹¤. êµì°¨íƒ€ì…ì´ë¯€ë¡œ ë‘ íƒ€ì…ì„ ëª¨ë‘ ë§Œì¡±í•œ ê²½ìš°ì´ê¸° ë•Œë¬¸ì´ë‹¤.

```ts
type IdType = string | number;
type Numeric = number | boolean;

type Universal = IdType & Numberic;
```

extend í‚¤ì›Œë“œëŠ” 100% êµì°¨íƒ€ì…ê³¼ ìƒì‘í•˜ì§€ ì•ŠëŠ”ë‹¤. êµì°¨ íƒ€ì…ìœ¼ë¡œ í–ˆì„ ë•Œ ì—ëŸ¬ê°€ ì•ˆë‚˜ëŠ” ì´ìœ ëŠ” type í‚¤ì›Œë“œëŠ” êµì°¨ íƒ€ì…ìœ¼ë¡œ ì„ ì–¸ë˜ì—ˆì„ ë•Œ ìƒˆë¡­ê²Œ ì¶”ê°€ë˜ëŠ” ì†ì„±ì— ëŒ€í•´ ë¯¸ë¦¬ ì•Œ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì„ ì–¸ ì‹œ ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ì§€ë§Œ tipì˜ ì†ì„±ê³¼ ì„œë¡œ í˜¸í™˜ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— tipì˜ íƒ€ì…ì€ neverì´ë‹¤.

```ts
interface DeliveryTip {
  tip: number;
}

interface Filter extends DeliveryTip {
  tip: string;
  // ğŸš¨ Interface 'Filter' incorrectly extends interface 'DeliveryType'
  // ğŸš¨ Types of property 'tip' are incompatible
  // ğŸš¨ Type 'string' is not assignable to type 'number'
}

type Filter = DeliveryTip & {
  tip: string;
};
```

íƒ€ì… ìŠ¤í¬ë¦½íŠ¸ì˜ íƒ€ì…ì„ ì†ì„±ì´ ì•„ë‹ˆë¼ `ê°’ì˜ ì§‘í•©`ìœ¼ë¡œ ì´í•´í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤

## íƒ€ì… ì¢íˆê¸° - íƒ€ì… ê°€ë“œ

A | B íƒ€ì…ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ëŠ”ë‹¤ê³  ê°€ì •í•  ë•Œ ì¸ì íƒ€ì…ì´ A ë˜ëŠ” Bì¼ ë•Œë¥¼ êµ¬ë¶„í•´ì„œ ë¡œì§ì„ ì²˜ë¦¬í•´ì•¼ í•œë‹¤. ì´ëŸ´ë•Œ ifë¬¸ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤ê³  ìƒê°í•˜ì§€ë§Œ ì»´íŒŒì¼ì‹œ íƒ€ì… ì •ë³´ê°€ ëª¨ë‘ ì œê±°ë˜ì–´ íƒ€ì…ì„ ì‚¬ìš©í•˜ëŠ” ifë¬¸ì„ ë§Œë“¤ ìˆ˜ëŠ” ì—†ë‹¤. ì´ëŸ´ë•Œ JS ì—°ì‚°ì typeof, instanceof, inì„ ì‚¬ìš©í•´ì„œ íƒ€ì…ì„ ì¢íŒë‹¤.

### ì›ì‹œíƒ€ì…ì„ ì¶”ë¡ í•  ë•Œ: typeof

typeof ì—°ì‚°ìë¥¼ í™œìš©í•˜ë©´ ì›ì‹œ íƒ€ì…ì— ëŒ€í•´ ì¶”ë¡ í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ nullê³¼ ë°°ì—´íƒ€ì… ë“±ì´ object íƒ€ì…ìœ¼ë¡œ íŒë³„ë‚˜ì„œ ë³µì¡í•œ íƒ€ì…ì— ì ìš©í•˜ê¸°ì—ëŠ” í•œê³„ê°€ ìˆë‹¤. typeof ì—°ì‚°ìë¥¼ ì‚¬ìš©í•´ì„œ ê²€ì‚¬í•  ìˆ˜ ìˆëŠ” íƒ€ì…ì€ string, number, boolean, undefined, object, function, bigint, symbol ì´ë‹¤.

```ts
const replaceHypen: (date: string | Date) => stirng | Date = (date) => {
  if (typeof date === "string") {
    return date.replace("/-/g", "/");
  }

  return date;
};
```

### ì¸ìŠ¤í„´ìŠ¤í™”ëœ ê°ì²´ íƒ€ì…ì„ íŒë³„í•  ë•Œ: instanceof

```ts
const onKeyDown = (event: React.KeyboardEvent) => {
  if (event.target instanceof HTMLInputElement && event.key === "Enter") {
    event.target.blur();
  }
};
```

### ê°ì²´ì˜ ì†ì„±ì´ ìˆëŠ”ì§€ ì—†ëŠ”ì§€ì— ë”°ë¥¸ êµ¬ë¶„: in

```ts
const NoticeDialog: React.Fc<NoticeDialogProps> = (props) => {
  if('cookieKey' in props) return <NoticeDialogWIthCookie {...props}/>;
  return  <NoticeDialogBase {...props}>
}
```

### is ì—°ì‚°ìë¡œ ì‚¬ìš©ì ì •ì˜ íƒ€ì… ê°€ë“œ ë§Œë“¤ì–´ í™œìš©í•˜ê¸°

ì§ì ‘ íƒ€ì… ê°€ë“œ í•¨ìˆ˜ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ë°˜í™˜ íƒ€ì…ì´ íƒ€ì… ëª…ì œì¸ í•¨ìˆ˜ë¥¼ ì •ì˜í•´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. A is B í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•˜ë©´ ë˜ëŠ”ë° AëŠ” ë§¤ê°œë³€ìˆ˜ì´ê³  BëŠ” íƒ€ì…ì´ë‹¤. íƒ€ì… ëª…ì œë€ í•¨ìˆ˜ì˜ ë°˜í™˜ íƒ€ì…ì— ëŒ€í•œ íƒ€ì… ê°€ë“œë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” íŠ¹ë³„í•œ í˜•íƒœì˜ í•¨ìˆ˜ì´ë‹¤.

ê°œë°œìëŠ” ifë¬¸ ë‚´ë¶€ì—ì„œ str íƒ€ì…ì´ DestinationCodeë¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” isDestinationCodeì˜ includes í•¨ìˆ˜ë¥¼ í•´ì„í•´ str íƒ€ì…ì„ ì¶”ë¡ í•  ìˆ˜ ì—†ë‹¤. detinationNamesì˜ íƒ€ì…ì€ DestinationNames[]ì´ê¸° ë•Œë¬¸ì— strì˜ íƒ€ì…ì¸ stringìœ¼ë¡œëŠ” pushí•  ìˆ˜ ì—†ë‹¤. ì´ì²˜ëŸ¼ ë°˜í™˜ê°’ì— ëŒ€í•œ íƒ€ì… ì •ë³´ë¥¼ ì•Œë ¤ì£¼ê³  ì‹¶ì„ë• isë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```ts
const isDestinationCode = (x: string): x is DestinationCode => destinationCodeList.includes(x);

const getAvailableDestinationNameList = async (): Promise<DestinationName[]> => {
  const data = await AxiosRequest<string[]>("get", ".../destinations");
  const destinationNames: DestinationName[] = [];

  data?.forEach((str) => {
    if (isDestinationCode(str)) {
      destinationNames.push(DestinationNameSet[str]);
      // isDestinationCodeì˜ ë°˜í™˜ ê°’ì— isë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  booleanì´ë¼ê³  í•œë‹¤ë©´ ë‹¤ìŒ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.
      // ğŸš¨ Element implicity has an 'any' type because expression of type 'string' can't be used to index type 'Record<'MESSAGE_PLATFORM'>'
    }
  });
};
```

## íƒ€ì… ì¢íˆê¸° - ì‹ë³„í•  ìˆ˜ ìˆëŠ” ìœ ë‹ˆì˜¨

ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œëŠ” ì›ë˜ëŠ” ì—ëŸ¬ë¥¼ ë°œìƒí•´ì•¼ ë˜ëŠ”ë° ë• íƒ€ì´í•‘ ì–¸ì–´ì´ê¸° ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë°œìƒì´ ì•ˆëœë‹¤.

```ts
type TextError = {
  errorCode: string;
  errorMessage: string;
};

type ToastError = {
  errorCode: string;
  errorMessage: string;
  toastShowDuration: number;
};

type AlertError = {
  errorCode: string;
  errorMessage: string;
  onConfirm: () => void;
};

type ErrorFeedbackType = TextError | ToastError | AlertError;
const errorArr: ErrorFeedbackType[] = [
  { errorCode: 100, errorMessage: "í…ìŠ¤íŠ¸ ì—ëŸ¬", toastShowDuration: 3000 }, // expected Error
];
```

ì‹ë³„í•  ìˆ˜ ìˆëŠ” ìœ ë‹ˆì˜¨ì„ ì‚¬ìš©í•´ íƒ€ì…ê°„ì˜ êµ¬ì¡° í˜¸í™˜ì„ ë§‰ì„ ìˆ˜ ìˆë‹¤.

```ts
type TextError = {
  errorType: "TEXT";
  errorCode: string;
  errorMessage: string;
};

type ToastError = {
  errorType: "TOAST";
  errorCode: string;
  errorMessage: string;
  toastShowDuration: number;
};

type AlertError = {
  errorType: "ALERT";
  errorCode: string;
  errorMessage: string;
  onConfirm: () => void;
};

type ErrorFeedbackType = TextError | ToastError | AlertError;
const errorArr: ErrorFeedbackType[] = [
  { errorType: "TEXT", errorCode: 100, errorMessage: "í…ìŠ¤íŠ¸ ì—ëŸ¬", toastShowDuration: 3000 }, // Object literal may only specify known properties, and 'toastShowDuration' does not exist in type 'TextError'
];
```

ìœ ë‹› íƒ€ì…ì´ë€ ì˜¤ì§ í•˜ë‚˜ì˜ ì •í™•í•œ ê°’ì„ ê°€ì§€ëŠ” íƒ€ì…ì„ ë§í•œë‹¤. null, undefined, ë¦¬í„°ëŸ´ íƒ€ì…ì„ ë¹„ë¡¯í•´ true, 1 ë“± ê·¸ ì˜ˆì‹œì´ë‹¤. ë‹¤ì–‘í•œ íƒ€ì…ì„ í• ë‹¹í•  ìˆ˜ ìˆëŠ” void, stirng, numberì™€ ê°™ì€ íƒ€ì…ì€ ì ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤. ì‹ë³„í•  ìˆ˜ ìˆëŠ” ìœ ë‹ˆì˜¨ì„ ì‚¬ìš©í•  ë–„ëŠ” `ìœ ë‹› íƒ€ì…`ìœ¼ë¡œ ì„¤ì •í•´ì•¼ í•œë‹¤.

ìœ ë‹› íƒ€ì…ì˜ ì¡°ê±´

- ë¦¬í„°ëŸ´ íƒ€ì…ì´ì–´ì•¼ í•œë‹¤.
- íŒë³„ìë¡œ ì„ ì •í•œ ê°’ì— ì ì–´ë„ í•˜ë‚˜ ì´ìƒì˜ ìœ ë‹› íƒ€ì…ì´ í¬í•¨ë˜ì–´ì•¼ í•˜ë©°, ì¸ìŠ¤í„´ìŠ¤í™”í•  ìˆ˜ ìˆëŠ” íƒ€ì…ì€ í¬í•¨ë˜ì§€ ì•ŠëŠ”ë‹¤.

## Exhaustiveness checking

ëª¨ë“  ì¼€ì´ìŠ¤ì— ëŒ€í•´ ì² ì €í•˜ê²Œ íƒ€ì…ì„ ê²€ì‚¬í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤.

```ts
type ProductPrice = '10000' | '20000'

const getProductName = (productPrice: ProductPrice): string => {
  if(productPrice === '10000') return 'ë°°ë¯¼ìƒí’ˆê¶Œ 1ë§Œ ì›';
  if(productPrice === '20000') return 'ë°°ë¯¼ìƒí’ˆê¶Œ 2ë§Œ ì›';
  else {
    return 'ë°°ë¯¼ ìƒí’ˆê¶Œ'
  }

type ProductPrice = '10000' | '20000' | '5000'

const getProductName = (productPrice: ProductPrice): string => {
  if(productPrice === '10000') return 'ë°°ë¯¼ìƒí’ˆê¶Œ 1ë§Œ ì›';
  if(productPrice === '20000') return 'ë°°ë¯¼ìƒí’ˆê¶Œ 2ë§Œ ì›';
  if(productPrice === '5000') return 'ë°°ë¯¼ìƒí’ˆê¶Œ 5ì²œì›';
  else {
    return 'ë°°ë¯¼ ìƒí’ˆê¶Œ'
  }
}
```

ìœ„ì™€ ê°™ì´ ProductPrice íƒ€ì…ì— 5000ì›ì´ ì¶”ê°€í•´ì„œ getProductNameë„ ìˆ˜ì •í•´ ì£¼ì—ˆë‹¤. ë§Œì•½ ìˆ˜ì •í•˜ì§€ ì•Šì•„ë„ ì¦‰ ifë¬¸ì— 5000ì´ë¼ëŠ” ê°’ì— ëŒ€í•œ ë¶„ê¸° ì²˜ë¦¬ë¥¼ í•´ì£¼ì§€ ì•Šì•„ë„ ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. ì´ëŸ´ë•Œ ì»´íŒŒì¼íƒ€ì„ ì—ëŸ¬ê°€ ë°œìƒí•˜ê²Œ í•˜ëŠ” ê²ƒì„ `Exhaustiveness Checking`ì´ë¼ê³  í•œë‹¤.

```ts
type ProductPrice = "10000" | "20000" | "5000";

const getProductName = (productPrice: ProductPrice): string => {
  if (productPrice === "10000") return "ë°°ë¯¼ìƒí’ˆê¶Œ 1ë§Œ ì›";
  if (productPrice === "20000") return "ë°°ë¯¼ìƒí’ˆê¶Œ 2ë§Œ ì›";
  if (productPrice === "5000") return "ë°°ë¯¼ìƒí’ˆê¶Œ 5ì²œì›";
  else {
    exhaustiveCheck(productPrice);
    return "ë°°ë¯¼ ìƒí’ˆê¶Œ";
  }
};

const exhaustiveCheck = (arg: never) => {
  throw new Error("type error!");
};
```

exhaustiveCheck í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ never íƒ€ì…ìœ¼ë¡œ ì„ ì–¸í•¨ìœ¼ë¡œì¨ ì–´ë–¤ ê°’ì„ ë°›ì„ ìˆ˜ë„ ì—†ìœ¼ë©° ë§Œì•½ ê°’ì´ ë“¤ì–´ì˜¤ë©´ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.
